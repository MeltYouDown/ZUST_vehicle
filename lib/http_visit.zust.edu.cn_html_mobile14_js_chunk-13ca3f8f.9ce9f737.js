(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13ca3f8f"],{"1e8e":function(e,t,s){"use strict";s("ce09")},ce09:function(e,t,s){},e088:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("flex",{staticClass:"wrap",attrs:{direction:"column"}},[t("button",{staticClass:"xiangguan"},[e._v("拜访相关信息")]),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("访问部门")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(e.page.deparName))])],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("访问人员")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(e.page.teacherName))])],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("访问时间")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(e.page.startEnd))])],1),t("div",{staticClass:"border"},[t("flex",{staticClass:"itemDivider",attrs:{direction:"column"}},[t("flex",{staticClass:"label"},[e._v("访问事由")]),t("flex",{staticStyle:{color:"#555555"}},[e._v(" "+e._s(e.page.reason))])],1)],1),t("div",{staticClass:"border"},[t("div",{staticClass:"zhu"},[t("span",[e._v("访客信息")])])]),e._l(e.page.recordVisitVos,(function(s){return t("flex",{key:s.id,staticClass:"peopleClass",attrs:{direction:"column"}},[t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("访客姓名")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(s.name))])],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("手机号码")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1,"align-items":"center"}},[t("flex",[e._v(e._s(s.phone))]),t("flex",{directives:[{name:"show",rawName:"v-show",value:"finished"==e.page.status&&1==s.smsOk,expression:"page.status == 'finished' && people.smsOk == 1 "}],staticClass:"smsOk"},[e._v("通行码已成功发送 ")]),t("flex",{directives:[{name:"show",rawName:"v-show",value:"finished"==e.page.status&&0==s.smsOk,expression:"page.status == 'finished' && people.smsOk == 0 "}],staticClass:"smsOkResend",on:{click:()=>e.smsResend(s)}},[e._v("通行码重发 ")])],1)],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("身份证号")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(s.identityCard))])],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("车牌号")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(s.licencePlate||"无"))])],1),t("flex",{staticClass:"itemDivider"},[t("flex",{staticClass:"label"},[e._v("疫苗接种")]),t("flex",{staticStyle:{width:"0"},attrs:{"item-grow":1}},[e._v(e._s(s.inoculate))])],1),t("flex",{directives:[{name:"show",rawName:"v-show",value:s.picture,expression:"people.picture"}],staticClass:"itemDivider",attrs:{direction:"column"}},[t("flex",{staticClass:"label"},[e._v("健康码截图")]),t("img",{attrs:{src:s.picture,alt:""},on:{click:function(t){return e.showImgPreview(s.picture)}}})],1),t("flex",{directives:[{name:"show",rawName:"v-show",value:s.route,expression:"people.route"}],staticClass:"itemDivider",attrs:{direction:"column"}},[t("flex",{staticClass:"label"},[e._v("行程码截图")]),t("img",{attrs:{src:s.route,alt:""},on:{click:function(t){return e.showImgPreview(s.route)}}})],1),t("flex",{directives:[{name:"show",rawName:"v-show",value:s.nucleicAcid,expression:"people.nucleicAcid"}],staticClass:"itemDivider",attrs:{direction:"column"}},[t("flex",{staticClass:"label"},[e._v("核酸报告截图")]),t("img",{attrs:{src:s.nucleicAcid,alt:""},on:{click:function(t){return e.showImgPreview(s.nucleicAcid)}}})],1)],1)})),t("van-steps",{staticClass:"border",staticStyle:{margin:"20px 0"},attrs:{active:e.maxSteps,"finish-icon":e.imgActive,direction:"vertical"}},[t("div",{staticClass:"liucheng"},[e._v("流程")]),e._l(e.page.stepsVos,(function(s,a){return t("van-step",{key:a},[t("div",[e._v(e._s(e._f("getStepTitle")(s)))]),s.applyTeacherId?t("div",[t("div",[e._v("审核人："+e._s(s.applyTeacherName))]),t("div",[e._v("操作时间："+e._s(s.updateTime))]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.applyRemark,expression:"item.applyRemark"}],staticStyle:{color:"red"}},[e._v(" 拒绝理由： "+e._s(s.applyRemark)+" ")])]):t("div",[t("div",{staticClass:"daiShenHe"},[t("span",[e._v("可审核人：")]),e._l(s.judgeTeachers,(function(s,a){return t("div",{key:a,staticClass:"daiShenHe_name"},[t("div",[e._v(e._s(s.name))])])}))],2)])])})),t("van-step",{directives:[{name:"show",rawName:"v-show",value:"finished"==e.page.status,expression:"page.status == 'finished'"}],staticStyle:{"font-size":"15px"}},[e._v(" 已通过 ")]),t("van-step",{directives:[{name:"show",rawName:"v-show",value:"wait-fill"==e.page.status,expression:"page.status == 'wait-fill'"}],staticStyle:{"font-size":"15px"}},[e._v(" 待填写 ")])],2),e.showBtns?t("flex",{staticClass:"footer",attrs:{"align-items":"center"}},[t("button",{staticStyle:{"background-color":"#5fb8fe"},on:{click:function(t){return e.pass()}}},[e._v(e._s(e.okText))]),t("button",{staticStyle:{"background-color":"#eb5958"},on:{click:()=>this.showDialog=!0}},[e._v("拒绝")])]):e._e(),t("van-dialog",{attrs:{"before-close":e.refused,"show-cancel-button":"",title:"拒绝理由"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t("div",[t("van-field",{staticClass:"liyou",attrs:{autosize:"",placeholder:"请输入原因",rows:"2","show-word-limit":"",type:"textarea"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)])],2)},i=[],l=s("2c56"),c=s("c776"),r=s("bcb3"),n=s("d4ba"),o={particulars:e=>l["a"].get("/app/record/particulars",{params:{recordId:e}}),judge:({stepId:e,audit:t,applyRemark:s})=>l["a"].post("/app/record/judge",{stepId:e,audit:t,applyRemark:s}),smsResend:e=>l["a"].post("/app/record/smsResend",{id:e})},d=s("e38d"),p=s.n(d),u=s("906c");const v={"wait-visit":"通过(受访人)","wait-invite":"通过(邀请人)","wait-depart":"通过(部门负责人)","wait-leader":"通过(领导)",finished:"审核通过",refused:"已拒绝"},m={"wait-fill":"待填写","wait-visit":"待受访人审核","wait-invite":"待邀请人审核","wait-depart":"待部门审核","wait-leader":"待领导审核",finished:"审核通过",refused:"已拒绝",canceled:"已取消"};var A={data(){return{flag:!1,id:this.$route.query.id,page:{accessTime:"",overTime:"",stepsVos:[]},text:"",showBtns:!1,showDialog:!1,okText:"",stepsVos:[],imgActive:p.a}},created(){this.detail()},computed:{maxSteps(){var e,t;let s=0;return null===(e=this.page)||void 0===e||null===(t=e.stepsVos)||void 0===t||t.forEach((e,t)=>{e.applyTeacherId&&s++}),"finished"!=this.page.status&&"wait-fill"!=this.page.status||s++,s-1}},filters:{isEmpty:e=>""==e||null==e||void 0==e||"null"==e,isNotEmpty:e=>!(""==e||null==e||void 0==e||"null"==e),getStepTitle:e=>{let t=u["a"].isEmpty(e.applyRemark)?"通过":"拒绝",s=!u["a"].isEmpty(e.applyTeacherId);return"wait-visit"==e.status?s?"访问人审核"+t:"待访问人审核":"wait-invite"==e.status?s?"邀请人审核"+t:"待邀请人审核":"wait-depart"==e.status?s?"部门审核"+t:"待部门审核":"wait-leader"==e.status?s?"领导审核"+t:"待领导审核":void 0}},methods:{showImgPreview:e=>{Object(c["a"])([e])},judge(e,t){let s=this.page.stepsVos.find((e,t)=>{if(null===e.applyTeacherId||""===e.applyTeacherId||void 0===e.applyTeacherId||"null"===e.applyTeacherId)return e});e.stepId=s.id,r["a"].loading({message:"数据提交中",duration:0}),o.judge(e).then(e=>{200==e.code?(Object(r["a"])("操作成功"),t&&t(),this.detail()):(Object(l["b"])(e),t&&t(!1))})},pass(){n["a"].confirm({title:"温馨提示",message:"确定要通过审核吗？"}).then(()=>{this.judge({audit:1,applyRemark:""})})},refused(e,t){"confirm"==e?this.judge({applyRemark:this.text,audit:0},t):t()},detail(){r["a"].loading({message:"获取详情中",duration:0}),o.particulars(this.id).then(e=>{if(r["a"].clear(),200==e.code){var t,s,a;let i=e.data;this.okText=v[i.status],this.showBtns=-1!==(null===(t=i.stepsList)||void 0===t?void 0:t.indexOf(i.status)),this.page={...i,startEnd:((null===(s=i.accessTime)||void 0===s?void 0:s.substr(0,10))||"未填写")+" ~ "+((null===(a=i.overTime)||void 0===a?void 0:a.substr(0,10))||"未填写"),inoculate:0==i.inoculate?"未接种":"已接种",recordVisitVos:i.recordVisitVos.map(e=>({...e,inoculate:0==e.inoculate?"未接种":"已接种"})),stepsVos:e.data.stepsVos.map(e=>{let t="待审核",s={...e,delay:t};return s.statusStr=m[e.status],e.applyTeacherId&&(s.tips="审核人："+e.applyTeacherName),s})}}else Object(l["b"])(e)})},smsResend(e){Object(n["a"])({message:"来访人可能没有收到通行码，是否重发一次短信？",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确定重发",beforeClose:(t,s)=>{"confirm"==t?o.smsResend(e.id).then(e=>{200==e.code?(Object(r["a"])("发送成功"),s(),this.detail()):(s(!1),Object(l["b"])(e))}):s()}})}}},w=A,h=(s("1e8e"),s("e607")),f=Object(h["a"])(w,a,i,!1,null,"7e349dc5",null);t["default"]=f.exports},e38d:function(e,t){e.exports="data:image/png;base64,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"}}]);